# 知识表示和专家系统

![符号人工智能内容概述](../../sketchnotes/ai-symbolic.png)

> 漫画笔记 by [Tomomi Imura](https://twitter.com/girlie_mac)

人工智能的追求基于对知识的搜索，类似于人类通过理解世界来做出决策。但是要如何实现这一目标呢？

## [预讲测验](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/102)
在人工智能的早期阶段，创建智能系统的自上而下方法（在前一课中讨论过）很受欢迎。这种方法的想法是将人们的知识提取成一种机器可读的形式，然后使用它来自动解决问题。这种方法基于两个重要的思想：

* 知识表示
* 推理

## 知识表示

在符号化的人工智能中，**知识**是一个重要的概念。很重要的是要区分知识和*信息*或*数据*。例如，人们可以说书包含知识，因为人们可以通过学习书籍而成为专家。然而，书籍所包含的实际上是被称为*数据*的东西，通过阅读书籍并将这些数据整合到我们的世界模型中，我们将这些数据转化为知识。

> ✅ **知识**是我们头脑中包含的东西，代表着我们对世界的理解。它是通过一个积极的**学习**过程获得的，该过程将我们收到的信息片段整合到我们对世界的积极模型中。通常情况下，我们并不严格定义知识，而是使用[DIKW金字塔](https://en.wikipedia.org/wiki/DIKW_pyramid)将其与其他相关概念相结合。它包含以下概念：

* **数据**是指以物理媒体表示的内容，如书面文字或口头语言。数据独立于人类存在，并可以在人们之间传递。
* **信息**是我们在头脑中解释数据的方式。例如，当我们听到“计算机”这个词时，我们对它有一些理解。
* **知识**是将信息整合到我们的世界模型中。例如，一旦我们学会了计算机是什么，我们就开始对它的工作原理、价格和用途有一些想法。这个相互关联的概念网络构成了我们的知识。
* **智慧**是对世界的理解的另一个层面，它代表了“元知识”，例如对知识使用的方式和时间的一些概念。

<img src="../images/DIKW_Pyramid.png" width="30%"/>*图片 [来源于维基百科](https://commons.wikimedia.org/w/index.php?curid=37705247)，由Longlivetheux创作，CC BY-SA 4.0*

因此，**知识表达**的问题是找到一种在计算机内部以数据形式表示知识的有效方法，以使其能够自动使用。这可以看作是一个光谱:

![知识表达的光谱](../images/knowledge-spectrum.png)

> 图片由[Dmitry Soshnikov](http://soshnikov.com)提供

* 在左侧，有一些非常简单的知识表达类型，可以被计算机有效地使用。最简单的一种类型是基于算法的，即知识由计算机程序表示。然而，这不是最好的知识表达方式，因为它不灵活。我们头脑中的知识通常是非算法性的。
* 在右侧，有一些如自然文本的表达形式。它是最强大的，但不能用于自动推理。> ✅ 请花一分钟思考一下你是如何将知识转化为笔记的方式。是否有一种特定的格式对于你记忆有很大的帮助呢？

## 分类计算机知识表示法

我们可以将不同的计算机知识表示方法分为以下几类：

* **网络表示法** 基于我们大脑中存在着一系列相互关联的概念。我们可以尝试在计算机中以图形的形式重现这些网络，这就是所谓的**语义网络**。

1. **对象-属性-值三元组** 或 **属性-值对**。由于图形可以以计算机中的节点和边的列表的形式表示，我们可以通过一个包含对象、属性和值的三元组列表来表示一个语义网络。举个例子，我们可以构建以下关于编程语言的三元组：

对象 | 属性 | 值
------|------|-----
Python | 是 | 弱类型语言
Python | 发明者 | Guido van Rossum
Python | 块语法 | 缩进
弱类型语言 | 没有 |类型定义

> ✅ 想想如何使用三元组来表示其他类型的知识。2. **层次表示**强调了我们经常在头脑中创建对象的层次结构。例如，我们知道金丝雀是一种鸟，所有鸟都有翅膀。我们还有一些关于金丝雀通常的颜色和飞行速度的概念。

   - **帧表示**是基于将每个对象或对象类表示为包含**槽**的**帧**。槽可以具有可能的默认值、值限制或调用存储过程以获取槽值。所有帧形成一个类似于面向对象编程语言中的对象层次结构的层次结构。
   - **场景**是表示可以随时间展开的复杂情境的特殊帧。

**Python**

槽位 | 值 | 默认值 | 区间 |
-----|-------|---------------|----------|
名称 | Python | | |**是-A** | 无类型语言 | | |
**变量命名方式** | | 驼峰命名法 | |
**程序长度** | | | 5-5000行 |
**块语法** | 缩进 | | |

1. **过程表示**基于通过一系列可在特定条件发生时执行的操作列表来表示知识。
   - 产生规则是if-then语句，允许我们得出结论。例如，医生可以有一条规则，**如果**患者有高热或血液检查中C-反应蛋白水平高**那么**他有炎症。一旦我们遇到其中一种条件，我们就可以得出关于炎症的结论，然后在进一步推理时使用它。
   - 算法可以被看作是另一种形式的过程表示，尽管它们几乎不直接在知识系统中使用。

2. **逻辑**最初是亚里士多德提出的一种表示普遍人类知识的方法。- Predicate Logic（谓词逻辑）作为一个数学理论太过丰富而无法计算，因此通常使用其中的一部分，比如在Prolog中使用的Horn子句。
- 描述逻辑（Descriptive Logic）是一系列逻辑系统，用于表示和推理分布式知识表示（如“语义网络”）中的对象层次结构。

## 专家系统

符号化人工智能的早期成功之一是所谓的“专家系统” - 这是一种计算机系统，旨在在某个有限的问题领域中充当专家。它们基于从一个或多个人类专家中提取的“知识库”，并包含一个在其上执行推理的“推理引擎”。

![Human Architecture](../images/arch-human.png) | ![Knowledge-Based System](../images/arch-kbs.png)
---------------------------------------------|------------------------------------------------
人类神经系统的简化结构 | 基于知识的系统的架构专家系统的构建方式类似于人类推理系统，其中包含**短期记忆**和**长期记忆**。同样，在基于知识的系统中，我们区分以下组件：

* **问题记忆**：包含关于当前正在解决的问题的知识，例如患者的温度或血压，是否存在炎症等。这种知识也被称为**静态知识**，因为它包含了我们当前对问题了解的快照 - 所谓的*问题状态*。
* **知识库**：表示有关问题领域的长期知识。它是从人类专家手动提取的，并且在每次咨询时不会改变。因为它允许我们从一个问题状态导航到另一个问题状态，所以它也被称为**动态知识**。
* **推理引擎**：协调整个问题状态空间搜索的过程，根据需要向用户提问。它还负责找到要应用于每个状态的正确规则。

例如，让我们考虑以下根据动物的物理特征确定动物的专家系统：

![AND-OR树](../images/AND-OR-Tree.png)> 图片由[Dmitry Soshnikov](http://soshnikov.com)制作

这个图示被称为**AND-OR树**，它是一组生产规则的图形表示。在从专家那里提取知识的开始阶段绘制一棵树是很有用的。为了表示计算机内部的知识，使用规则更加方便:

```
如果动物吃肉
或者 (动物有锋利的牙齿
     并且 动物有爪子
     并且 动物有向前看的眼睛
```

### 正向推理与反向推理

在前面的例子中，我们使用的是正向推理。即，我们从已知的条件开始，应用规则并得出结论。这种类型的推理被称为正向链推理或数据驱动推理。

另一种类型的推理是反向推理。在反向推理中，我们从所需的结论开始，逆向应用规则以确定满足条件的可能的条件。这种类型的推理被称为反向链推理或目标驱动推理。

正向推理适用于我们已经知道条件并且想要得出结论的情况。例如，在动物分类的例子中，我们知道动物是有脊椎动物和有爪动物，并且我们想要得出动物是食肉动物的结论。通过应用适当的规则，我们可以得出这个结论。

反向推理适用于我们已经知道结论并且想要确定满足条件的所有可能条件的情况。例如，假设我们想要找到一个动物，该动物是食肉动物，并且我们已经知道动物是有爪动物。逆向应用适当的规则，我们可以确定动物是有脊椎动物。

### 正向推理和反向推理的比较

正向推理和反向推理具有不同的特点和应用场景：

- 正向推理是使用已知条件来推导出结论，比如通过应用规则或逻辑推理。它适用于我们拥有条件并且想要得出结论的情况。

- 反向推理是从所需的结论开始，并逆向应用规则以确定满足条件的可能条件。它适用于我们已经知道结论，并且想要确定满足条件的所有可能条件的情况。

正向推理更常见和直观，因为它类似于我们的日常思维方式。我们从已知的条件开始，并将它们应用到规则中，得出结论。

反向推理在某些情况下也很有用，特别是当我们知道所需的结论并且想要确定满足条件的可能条件时。它可以用于推理和解决一些问题，例如诊断医学病例或寻找特定解决方案。

正向推理和反向推理在不同的场景和问题中有不同的应用，了解它们的特点和适用性可以帮助我们在实际应用中更好地选择和使用它们。上述描述的过程称为**正向推理**。它从工作内存中提取问题的某些初始数据，然后执行以下推理循环：

1. 如果目标属性在工作内存中存在-停止并给出结果。
2. 寻找所有当前满足条件的规则-获得**冲突集**。
3. 执行**冲突解决**-选择一条将在此步骤上执行的规则。可以选择不同的冲突解决策略：
   - 选择知识库中的第一个适用规则
   - 选择一个随机规则
   - 选择一个*更具体*的规则，即满足“左侧”（LHS）最多条件的规则。
4. 应用所选择的规则，并将新的知识插入到问题状态中。
5. 重复从步骤1开始。然而，在某些情况下，我们可能希望从零开始了解问题，并提出问题来帮助我们得出结论。例如，在进行医学诊断时，我们通常不会在开始诊断患者之前预先进行所有医学分析。相反，我们希望在需要做出决策时进行分析。

这个过程可以使用**逆向推理**进行建模，它由**目标**驱动 - 我们要查找的属性值：

1. 选择所有可以给我们目标值的规则（即，目标位于右侧）- 冲突集
2. 如果没有针对该属性的规则，或者有一条规则说我们应该询问用户的值 - 向用户询问，否则：
3. 使用冲突解决策略来选择一条我们将用作*假设*的规则 - 我们尝试证明它
4. 递归地为规则的左侧所有属性重复步骤3，试图将它们证明为目标
5. 如果在任何时候过程失败 - 在步骤3中使用另一条规则。

> ✅ 在哪些情况下, 前向推理是更合适的? 反向推理呢?

### 实现专家系统

可以使用不同的工具来实现专家系统:

* 直接在一些高级编程语言中编程。这不是最好的主意，因为基于知识的系统的主要优势在于知识与推理是分离的，潜在地，领域专家应该能够编写规则而不需要了解推理过程的细节.
* 使用**专家系统工具包**，即一个专门设计用来通过某种知识表示语言来填充知识的系统.## ✍️ 练习：动物推理

详见[Animals.ipynb](https://github.com/microsoft/AI-For-Beginners/blob/main/lessons/2-Symbolic/Animals.ipynb)中实现前向和后向推理专家系统的示例。

> **注意**：这个示例相当简单，只是展示了专家系统的外观。只有当你创建这样一个系统时，你才会注意到它的某些"智能"行为，一旦你达到一定数量的规则，大约 200+。在某一点上，规则变得太复杂，无法记住所有规则，这时候你可能会开始想知道为什么系统会做出某些决策。然而，知识系统的重要特征在于你始终可以**解释**任何决策是如何做出的。

## 本体论和语义网

在20世纪末，出现了一个使用知识表示来注释互联网资源的倡议，以便能够找到与非常特定查询相对应的资源。这个运动被称为**语义网**，它依赖于几个概念：- 一种基于**[描述逻辑](https://en.wikipedia.org/wiki/Description_logic)**（DL）的特殊知识表示。它类似于框架知识表示，因为它构建了一个带有属性的对象层次结构，但它具有形式逻辑语义和推理。有一个完整的DL家族，它在表达能力和推理的算法复杂性之间保持平衡。
- 分布式知识表示，其中所有概念都由全局URI标识符表示，从而可以创建跨互联网的知识层次结构。
- 一系列基于XML的知识描述语言：RDF（资源描述框架）、RDFS（RDF模式）、OWL（本体网页语言）。

语义网中的核心概念是 **本体（Ontology）** 的概念。它是指使用某种形式的知识表示对问题域进行明确规定的明确规范。简单的本体可以只是一个问题域中的对象层次结构，但更复杂的本体将包括可用于推理的规则。

在语义网中，所有表示都是基于三元组。每个对象和每个关系都由URI唯一标识。例如，如果我们想要陈述这个AI课程是由Dmitry Soshnikov在2022年1月1日开发的这个事实-我们可以使用以下三元组：
<img src="../images/triplet.png" width="30%"/>
```
✅ 这里的`http://www.example.com/terms/creation-date`和`http://purl.org/dc/elements/1.1/creator`是一些已知且普遍接受的URI，用于表示“创建者”和“创建日期”这些概念。

在更复杂的情况下，如果我们想要定义一个创建者的列表，可以使用在RDF中定义的一些数据结构。

![triplet-complex](images/triplet-complex.png)
```
> 以上图示来自[Dmitry Soshnikov](http://soshnikov.com)

构建语义网的进展在某种程度上受到了搜索引擎和自然语言处理技术的成功的影响，这些技术允许从文本中提取结构化数据。然而，在某些领域仍然存在着保持本体论和知识库的重要工作。以下是几个值得注意的项目：

* [WikiData](https://wikidata.org/) 是与维基百科相关联的一系列可机读的知识库。大部分数据都是从维基百科的 *InfoBox* 中提取的，这些是维基百科页面中的结构化内容块。您可以使用SPARQL查询语言查询[WikiData](https://query.wikidata.org/)，这是一种专门用于语义网的查询语言。以下是一个示例查询，它显示了人类中最流行的眼睛颜色：


```sparql
#defaultView:BubbleChart
SELECT ?eyeColorLabel (COUNT(?human) AS ?count)
```
WHERE子句指定了一个SPARQL查询模式，该模式用于从数据库中检索满足指定条件的数据。在这个查询中，我们使用了三个三元组来指定我们的条件：

- 第一个三元组表示?human是一个实例，其类型为"wd:Q5"（代表人类）。
- 第二个三元组表示?human的眼睛颜色为?eyeColor。
- 第三个三元组是一个SERVICE子句，用于从Wikibase服务中获取标签。在这个例子中，我们要求使用英语来获取标签。

GROUP BY子句按照?eyeColorLabel字段对结果进行分组。

最后的查询将返回一个表格，其中列名为"?eyeColorLabel"，包含了按照眼睛颜色分组的结果。

DBpedia是类似于WikiData的另一个项目，用于获取和整理维基百科的数据。> ✅ 如果你想尝试构建自己的本体论，或者打开现有的本体论，有一个很棒的可视化本体论编辑器叫做 [Protégé](https://protege.stanford.edu/)。你可以下载它，或者在线使用。

<img src="../images/protege.png" width="70%"/>

*Web Protégé编辑器打开了Romanov家族本体。截图：Dmitry Soshnikov*

## ✍️ 练习：

一个家族本体论请参考[FamilyOntology.ipynb](https://github.com/Ezana135/AI-For-Beginners/blob/main/lessons/2-Symbolic/FamilyOntology.ipynb)中的示例，使用语义化网络技术来推理家庭关系。我们将使用常见的GEDCOM格式表示家族谱系，并使用家庭关系本体构建一张包含所有家庭关系的图形，适用于给定的个人集。

## Microsoft Concept Graph

在大多数情况下，本体是通过手工创建的。然而，也可以从非结构化数据（例如自然语言文本）中“挖掘”本体。

微软研究曾进行过这样一次尝试，结果就是[Microsoft Concept Graph](https://blogs.microsoft.com/ai/microsoft-researchers-release-graph-that-helps-machines-conceptualize/?WT.mc_id=academic-77998-cacaste)。

这是一个大型的实体集合，使用`is-a`继承关系进行分组。它可以回答诸如“什么是Microsoft？”之类的问题，答案可能是“一个概率为0.87的公司，和一个概率为0.75的品牌”。图形可以通过REST API或作为一个大型可下载的文本文件来使用，该文件列出了所有实体对。

## ✍️ 练习：概念图

尝试使用[MSConceptGraph.ipynb](https://github.com/microsoft/AI-For-Beginners/blob/main/lessons/2-Symbolic/MSConceptGraph.ipynb)笔记本，了解如何使用Microsoft Concept Graph将新闻文章分组到几个类别中。

## 结论

如今，人工智能经常被认为是*机器学习*或*神经网络*的同义词。然而，人类也表现出明确的推理能力，而这是神经网络目前无法处理的。在现实世界的项目中，明确的推理仍然被用于执行需要解释的任务，或者以受控的方式修改系统的行为。## 🚀 挑战

在与本课程相关的家族本体笔记本中，有机会尝试其他家族关系。试着发现家族谱中的新联系。

## [讲座后测验](https://red-field-0a6ddfd03.1.azurestaticapps.net/quiz/202)

## 复习与自学

在互联网上进行一些研究，以发现人们试图量化和编码知识的领域。了解布鲁姆的分类法，并回顾历史，了解人们如何理解他们的世界。探索林奈创建生物分类学的工作，并观察德米特里·门捷列夫创建描述和分组化学元素的方法。还有哪些有趣的例子你能找到？

**作业**: [构建本体](assignment.md)